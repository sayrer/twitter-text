# Set Ruby build environment for rules_ruby
# These environment variables are used by ruby-build during Ruby compilation
build --action_env=RUBY_CONFIGURE_OPTS="--disable-install-doc"

# macOS-specific settings for Homebrew
build:macos --action_env=CPPFLAGS="-I/opt/homebrew/include"
build:macos --action_env=LDFLAGS="-L/opt/homebrew/lib"
build:macos --action_env=RUBY=/opt/homebrew/opt/ruby@3.2/bin/ruby

# JDK
build --java_runtime_version=remote
build --java_language_version=23
build --tool_java_runtime_version=remote

build --bes_results_url=https://dm8uw3mxh3iqrufaqd9warxzu7rain8t.buildbuddy.io/invocation/
build --bes_backend=grpcs://dm8uw3mxh3iqrufaqd9warxzu7rain8t.buildbuddy.io
build --remote_cache=grpcs://dm8uw3mxh3iqrufaqd9warxzu7rain8t.buildbuddy.io
build --noremote_upload_local_results # Uploads logs & artifacts without writing to cache
build --remote_timeout=10m
build --remote_executor=grpcs://dm8uw3mxh3iqrufaqd9warxzu7rain8t.buildbuddy.io
build --remote_header=x-buildbuddy-api-key=ln05ZNuFf9I7mcDQjq5T
